Merged: https://github.com/ruby/ruby/pull/3689

Merged-By: mrkn <mrkn@ruby-lang.org>
