# Protected branches:
#   * master: Synchronized between cgit and GitHub bidirectionally [experimental]
#   * other branches: Only writable from cgit.
#
# Bidirectional sync is still WIP, so "write" is not permitted to ruby-commiters
# team yet. Still under testing.
#
# And this is enabled for "other branches" to prevent us from merging them.
# See also: https://bugs.ruby-lang.org/issues/16094
name: check_branch
on: [pull_request]
jobs:
  master:
    runs-on: ubuntu-latest
    steps:
      - name: Check if branch is master
        run: |
          if [ "$BASE_REF" != master ]; then
            echo "Only master branch accepts a pull request, but it's '$BASE_REF'."
            exit 1
          fi
        env:
          BASE_REF: ${{ github.base_ref }}
